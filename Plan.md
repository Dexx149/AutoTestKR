# План автоматизации тестирования веб-сервиса покупки тура

## 1. Перечень автоматизируемых сценариев

### 1.1. Сценарии для формы "Оплата по дебетовой карте"

#### Позитивные сценарии

- **S1: Успешная оплата с валидной APPROVED-карты**
  - Шаги:
    1. Открыть главную страницу веб-сервиса
    2. Нажать кнопку "Купить"
    3. В поле "Номер карты" ввести: 1111 2222 3333 4444
    4. В поле "Месяц" ввести валидный месяц
    5. В поле "Год" ввести валидный год
    6. В поле "Владелец" ввести валидное имя
    7. В поле "CVC/CVV" ввести валидный код
    8. Нажать кнопку "Продолжить"
  - Ожидаемый результат:
    - Появляется сообщение "Успешно"
    - В БД в таблице payment_entities добавляется запись со статусом APPROVED

- **S2: Отклонение оплаты с валидной DECLINED-карты**
  - Шаги:
    1. Открыть главную страницу веб-сервиса
    2. Нажать кнопку "Купить"
    3. В поле "Номер карты" ввести: 5555 6666 7777 8888
    4. Заполнить остальные поля валидными данными
    5. Нажать кнопку "Продолжить"
  - Ожидаемый результат:
    - Появляется сообщение "Ошибка"
    - В БД в таблице payment_entities добавляется запись со статусом DECLINED

#### Негативные сценарии

- **S3: Отправка формы с пустым полем "Номер карты"**
  - Шаги:
    1. Открыть главную страницу веб-сервиса
    2. Нажать кнопку "Купить"
    3. Оставить поле "Номер карты" пустым
    4. Заполнить остальные поля валидными данными
    5. Нажать кнопку "Продолжить"
  - Ожидаемый результат: Под полем "Номер карты" появляется сообщение об ошибке "Неверный формат"

- **S4: Отправка формы с неполным номером карты**
  - Шаги:
    1. Открыть главную страницу веб-сервиса
    2. Нажать кнопку "Купить"
    3. В поле "Номер карты" ввести: 1111 2222 3333 444
    4. Заполнить остальные поля валидными данными
    5. Нажать кнопку "Продолжить"
  - Ожидаемый результат: Под полем "Номер карты" появляется сообщение об ошибке "Неверный формат"

- **S5: Отправка формы с несуществующим номером карты**
  - Шаги:
    1. Открыть главную страницу веб-сервиса
    2. Нажать кнопку "Купить"
    3. В поле "Номер карты" ввести: 0000 0000 0000 0000
    4. Заполнить остальные поля валидными данными
    5. Нажать кнопку "Продолжить"
  - Ожидаемый результат: Появляется сообщение "Ошибка"

- **S6: Отправка формы с пустым полем "Месяц"**
  - Шаги:
    1. Открыть главную страницу веб-сервиса
    2. Нажать кнопку "Купить"
    3. Оставить поле "Месяц" пустым
    4. Заполнить остальные поля валидными данными
    5. Нажать кнопку "Продолжить"
  - Ожидаемый результат: Под полем "Месяц" появляется сообщение об ошибке "Неверный формат"

- **S7: Отправка формы с невалидным значением месяца**
  - Шаги:
    1. Открыть главную страницу веб-сервиса
    2. Нажать кнопку "Купить"
    3. В поле "Месяц" ввести: 00
    4. Заполнить остальные поля валидными данными
    5. Нажать кнопку "Продолжить"
  - Ожидаемый результат: Под полем "Месяц" появляется сообщение об ошибке "Неверно указан срок действия карты"

- **S8: Отправка формы с истекшим сроком действия карты**
  - Шаги:
    1. Открыть главную страницу веб-сервиса
    2. Нажать кнопку "Купить"
    3. В поле "Месяц" ввести прошедший месяц (например, 05)
    4. В поле "Год" ввести текущий год
    5. Заполнить остальные поля валидными данными
    6. Нажать кнопку "Продолжить"
  - Ожидаемый результат: Под полем "Месяц" появляется сообщение об ошибке "Неверно указан срок действия карты"

- **S9: Отправка формы с пустым полем "Год"**
  - Шаги:
    1. Открыть главную страницу веб-сервиса
    2. Нажать кнопку "Купить"
    3. Оставить поле "Год" пустым
    4. Заполнить остальные поля валидными данными
    5. Нажать кнопку "Продолжить"
  - Ожидаемый результат: Под полем "Год" появляется сообщение об ошибке "Неверный формат"

- **S10: Отправка формы с истекшим годом**
  - Шаги:
    1. Открыть главную страницу веб-сервиса
    2. Нажать кнопку "Купить"
    3. В поле "Год" ввести прошедший год
    4. Заполнить остальные поля валидными данными
    5. Нажать кнопку "Продолжить"
  - Ожидаемый результат: Под полем "Год" появляется сообщение об ошибке "Истёк срок действия карты"

- **S11: Отправка формы с пустым полем "Владелец"**
  - Шаги:
    1. Открыть главную страницу веб-сервиса
    2. Нажать кнопку "Купить"
    3. Оставить поле "Владелец" пустым
    4. Заполнить остальные поля валидными данными
    5. Нажать кнопку "Продолжить"
  - Ожидаемый результат: Под полем "Владелец" появляется сообщение об ошибке "Поле обязательно для заполнения"

- **S12: Отправка формы с именем владельца на кириллице**
  - Шаги:
    1. Открыть главную страницу веб-сервиса
    2. Нажать кнопку "Купить"
    3. В поле "Владелец" ввести: Иван Иванов
    4. Заполнить остальные поля валидными данными
    5. Нажать кнопку "Продолжить"
  - Ожидаемый результат: Под полем "Владелец" появляется сообщение об ошибке "Неверный формат"

- **S13: Отправка формы с цифрами в поле "Владелец"**
  - Шаги:
    1. Открыть главную страницу веб-сервиса
    2. Нажать кнопку "Купить"
    3. В поле "Владелец" ввести: Ivan123
    4. Заполнить остальные поля валидными данными
    5. Нажать кнопку "Продолжить"
  - Ожидаемый результат: Под полем "Владелец" появляется сообщение об ошибке "Неверный формат"

- **S14: Отправка формы с пустым полем "CVC/CVV"**
  - Шаги:
    1. Открыть главную страницу веб-сервиса
    2. Нажать кнопку "Купить"
    3. Оставить поле "CVC/CVV" пустым
    4. Заполнить остальные поля валидными данными
    5. Нажать кнопку "Продолжить"
  - Ожидаемый результат: Под полем "CVC/CVV" появляется сообщение об ошибке "Неверный формат"

- **S15: Отправка формы с неполным CVC/CVV**
  - Шаги:
    1. Открыть главную страницу веб-сервиса
    2. Нажать кнопку "Купить"
    3. В поле "CVC/CVV" ввести: 12
    4. Заполнить остальные поля валидными данными
    5. Нажать кнопку "Продолжить"
  - Ожидаемый результат: Под полем "CVC/CVV" появляется сообщение об ошибке "Неверный формат"

### 1.2. Сценарии проверки взаимодействия с БД

- **S16: Проверка корректности записи в БД при успешной оплате**
  - Шаги:
    1. Выполнить сценарий S1 (Успешная оплата)
    2. Выполнить запрос к БД для проверки последней записи в таблице payments
  - Ожидаемый результат: Запись содержит статус APPROVED, сумма соответствует цене тура

- **S17: Проверка корректности записи в БД при отклоненной оплате**
  - Шаги:
    1. Выполнить сценарий S2 (Отклоненная оплата)
    2. Выполнить запрос к БД для проверки последней записи в таблице payments
  - Ожидаемый результат: Запись содержит статус DECLINED

## 2. Перечень используемых инструментов с обоснованием выбора

### 2.1. Язык программирования
- **Java** - популярный в автоматизации, большой выбор библиотек

### 2.2. Фреймворк для автоматизации
- **Selenide** - упрощает работу с Selenium, повышает стабильность тестов

### 2.3. Система сборки
- **Maven или Gradle** - обеспечивают стандартизированную структуру проекта и простоту конфигурации

### 2.4. Фреймворк для тестирования
- **JUnit 5** - современный фреймворк для автоматизированного тестирования, поддерживает параметризованные тесты

### 2.5. Дополнительные библиотеки
- **Faker** - генерация тестовых данных
- **Allure** - создание отчетов
- **Lombok** - генерация кода

### 2.6. CI/CD
- **Jenkins, Github Actions, Gitlab**

## 3. Перечень и описание возможных рисков при автоматизации

1. **Нестабильность тестового окружения**: Общий симулятор банковских сервисов может быть перегружен, что приведет к таймаутам и ложноположительным срабатываниям тестов.

2. **Изменение UI/UX приложения**: Селекторы элементов на странице могут измениться, что сломает все UI-тесты.

3. **Время**: Основной риск. Непредвиденные технические сложности, поиск и документирование багов могут занять больше времени, чем планировалось.

## 4. Интервальная оценка с учётом рисков (в часах)

- **Планирование и настройка окружения**: 2-3 часа
  - Изучение ТЗ, написание плана: 1-2 ч
  - Настройка проекта (Gradle, Docker Compose), подготовка SUT к работе: 1 ч

- **Написание и отладка автотестов**: 6-9 часов
  - Реализация сценариев для формы: 4-6 ч
  - Реализация проверок в СУБД: 1-2 ч
  - Интеграция с Allure Report: 1 ч

- **Подготовка отчётности**: 4 часа
  - Прогон тестов, анализ результатов, оформление баг-репортов: 2 ч
  - Написание итоговых отчетов: 2 ч

**Итого с учетом рисков**: 12 - 16 часов
